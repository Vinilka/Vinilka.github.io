(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function o(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=o(i);fetch(i.href,n)}})();function l(s){const e=new Image;return e.src=s,e}const R="/assets/playerStandRight-DjvDmSGx.png",B="/assets/playerStandLeft-DEAAEG9d.png",G="/assets/playerMoveRight-D3Rde_7M.png",O="/assets/playerMoveLeft-BzurysD1.png",J="/assets/playerJumpRight-fcMDIpmw.png",z="/assets/playerJumpLeft-BRExVOJF.png";class V{constructor({canvas:e,context:o,gravity:r}){this.canvas=e,this.context=o,this.speed=10,this.gravity=r,this.position={x:100,y:100},this.velocity={x:0,y:1},this.width=134,this.height=150,this.jumpCount=0,this.image=l(R),this.frames=0,this.sprites={stand:{right:l(R),left:l(B),cropWidth:387.375},run:{right:l(G),left:l(O),cropWidth:395},jump:{right:l(J),left:l(z),cropWidth:395}},this.currentSprite=this.sprites.stand.right,this.currentCropWidth=this.sprites.stand.cropWidth}draw(){this.context.drawImage(this.currentSprite,this.currentCropWidth*this.frames,-5,this.currentCropWidth,454,this.position.x,this.position.y,this.width,this.height)}updatePlayerFrame(){this.frames++,this.frames>=16&&(this.currentSprite===this.sprites.stand.right||this.currentSprite===this.sprites.stand.left)?this.frames=0:this.frames>=20&&(this.currentSprite===this.sprites.run.right||this.currentSprite===this.sprites.run.left)?this.frames=0:this.frames>=30&&(this.currentSprite===this.sprites.jump.right||this.currentSprite===this.sprites.jump.left)&&(this.frames=0)}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=this.canvas.height&&(this.velocity.y+=this.gravity)}}class k{constructor(e,o,r,i){this.context=i,this.image=l(e),this.position={x:o,y:r},this.width=280,this.height=180,this.padding=10,this.horizontalPadding=26,this.messageText="",this.messageIndex=0,this.messageVisible=!1,this.typingSpeed=50,this.scale=0,this.scaleIncrement=.03,this.textStartDelay=1e3}showMessage(e){this.messageText=e,this.messageIndex=0,this.messageVisible=!0,setTimeout(()=>this.typeMessage(),this.textStartDelay)}typeMessage(){this.messageIndex<this.messageText.length&&(this.messageIndex++,setTimeout(()=>this.typeMessage(),this.typingSpeed))}draw(){this.messageVisible&&(this.scale<1&&(this.scale+=this.scaleIncrement),this.context.save(),this.context.translate(this.position.x+this.width/2,this.position.y+this.height/2),this.context.scale(this.scale,this.scale),this.context.translate(-(this.position.x+this.width/2),-(this.position.y+this.height/2)),this.context.drawImage(this.image,this.position.x,this.position.y,this.width,this.height),this.context.restore(),this.context.fillStyle="#1d6c7a",this.context.font="18px PatrickHand",this.wrapText(this.messageText.slice(0,this.messageIndex),this.position.x+this.horizontalPadding,this.position.y+this.padding,this.width-this.horizontalPadding*2,20))}wrapText(e,o,r,i,n){const f=e.split(" ");let b="",S=[],E="",P=null,C=0;for(let u=0;u<f.length;u++)E=b+f[u]+" ",P=this.context.measureText(E),C=P.width,C>i&&u>0?(S.push(b),b=f[u]+" "):b=E;S.push(b);const A=S.length*n;let L=r+(this.height-A)/2+n;for(let u=0;u<S.length;u++)this.context.fillText(S[u],o,L),L+=n}isVisible(){return this.messageVisible}}class F{constructor(e){this.context=e,this.dialogues=[]}addDialogue(e,o,r,i){const n=new k(e,o,r,this.context);this.dialogues.push({bubble:n,text:i,shown:!1})}showDialogue(e){e<this.dialogues.length&&!this.dialogues[e].shown&&(this.dialogues[e].bubble.showMessage(this.dialogues[e].text),this.dialogues[e].shown=!0)}resetDialogues(){this.dialogues.forEach(e=>{e.shown=!1,e.bubble.messageVisible=!1,e.bubble.messageIndex=0,e.bubble.scale=0})}updatePositions(e){this.dialogues.forEach(o=>{o.bubble.position.x+=e.x,o.bubble.position.y+=e.y})}draw(){this.dialogues.forEach(e=>{e.shown&&e.bubble.draw()})}}class m{constructor({x:e,y:o,image:r,context:i}){this.context=i,this.position={x:e,y:o},this.image=r,this.width=r.width,this.height=r.height}draw(){this.context.drawImage(this.image,this.position.x,this.position.y)}}class T{constructor({x:e,y:o,image:r,context:i}){this.context=i,this.position={x:e,y:o},this.image=r,this.width=r.width,this.height=r.height}draw(){this.context.drawImage(this.image,this.position.x,this.position.y)}}function q(s,e,o){window.addEventListener("keydown",({key:r})=>{switch(r){case"a":case"ArrowLeft":s.left.pressed=!0,o("left");break;case"d":case"ArrowRight":s.right.pressed=!0,o("right");break;case"w":case"ArrowUp":e.jumpCount<2&&(e.jumpCount++,s.up.pressed=!0,e.velocity.y-=18);break}}),window.addEventListener("keyup",({key:r})=>{switch(r){case"a":case"ArrowLeft":s.left.pressed=!1;break;case"d":case"ArrowRight":s.right.pressed=!1;break;case"w":case"ArrowUp":s.up.pressed=!1;break}})}const M="/assets/platform-ZmYJJPO7.png",H="/assets/hills-DPd9AaJB.png",N="/assets/background-CUvmzTqM.png",U="/assets/platformSmallTall-sZHpuomb.png",j="/assets/dialogueBoxRight-B75tebyr.png",w=document.querySelector("canvas"),a=w.getContext("2d");w.height=window.innerHeight;w.width=window.innerWidth;const Y=1.1;let h=l(M),Z=l(U),t,v=[],p,I=[],y;const d={right:{pressed:!1},left:{pressed:!1},up:{pressed:!1}};let x=0;const g=document.createElement("button");g.id="startBtn";g.innerText="▶️ Начать игру";g.style.position="fixed";g.style.top="20px";g.style.right="20px";g.style.zIndex="10";document.body.appendChild(g);const c=document.createElement("button");c.id="restartBtn";c.innerText="🔁 Начать сначала";c.style.position="fixed";c.style.top="60px";c.style.right="20px";c.style.zIndex="10";c.style.display="none";document.body.appendChild(c);g.addEventListener("click",()=>{g.style.display="none",GameState.reset(),W(),D()});c.addEventListener("click",()=>{GameState.reset(),W(),c.style.display="none"});function W(){h=l(M),c.style.display="none",t=new V({canvas:w,context:a,gravity:Y}),v=[new m({x:h.width*4+250,y:270,image:Z,context:a}),new m({x:0,y:470,image:h,context:a}),new m({x:h.width,y:470,image:h,context:a}),new m({x:h.width*2,y:470,image:h,context:a}),new m({x:h.width*3,y:470,image:h,context:a}),new m({x:h.width*4,y:470,image:h,context:a}),new m({x:h.width*5+200,y:470,image:h,context:a})],I=[new T({x:0,y:0,image:l(N),context:a}),new T({x:0,y:0,image:l(H),context:a})],p?p.resetDialogues():(p=new F(a),p.addDialogue(j,750,60,"Hello there! I'm Anastasia. Welcome to my game!"),p.addDialogue(j,1050,60,"I am passionate about programming and good looking designs")),x=0}function D(){requestAnimationFrame(D),a.fillStyle="white",a.fillRect(0,0,w.width,w.height),I.forEach(s=>{s.draw()}),p.draw(),x>h.width*5+300&&!GameState.isFinished&&(GameState.finish(),console.log("🎉 You reached the end!"),c.style.display="block"),v.forEach(s=>{s.draw()}),t.updatePlayerFrame(),t.update(),d.right.pressed&&t.position.x<400?t.velocity.x=t.speed:d.left.pressed&&t.position.x>100||d.left.pressed&&x===0&&t.position.x>0?t.velocity.x=-t.speed:(t.velocity.x=0,d.right.pressed?(x+=t.speed,v.forEach(s=>{s.position.x-=t.speed}),I.forEach(s=>{s.position.x-=t.speed*.66}),p.updatePositions({x:-t.speed*.66,y:0})):d.left.pressed&&x>0&&(x-=t.speed,v.forEach(s=>{s.position.x+=t.speed}),I.forEach(s=>{s.position.x+=t.speed*.66}),p.updatePositions({x:t.speed*.66,y:0}))),v.forEach(s=>{t.position.y+t.height<=s.position.y&&t.position.y+t.height+t.velocity.y>=s.position.y&&t.position.x+t.width>=s.position.x&&t.position.x<=s.position.x+s.width&&(t.velocity.y=0,t.jumpCount=0)}),t.position.x>200&&!p.dialogues[0].shown&&p.showDialogue(0),t.position.x>600&&!p.dialogues[1].shown&&p.showDialogue(1),d.up.pressed?(t.frames=1,y==="right"?(t.currentSprite=t.sprites.jump.right,t.currentCropWidth=t.sprites.jump.cropWidth):y==="left"&&(t.currentSprite=t.sprites.jump.left,t.currentCropWidth=t.sprites.jump.cropWidth)):d.right.pressed&&y==="right"&&t.currentSprite!==t.sprites.run.right?(t.frames=1,t.currentSprite=t.sprites.run.right,t.currentCropWidth=t.sprites.run.cropWidth):d.left.pressed&&y==="left"&&t.currentSprite!==t.sprites.run.left?(t.frames=1,t.currentSprite=t.sprites.run.left,t.currentCropWidth=t.sprites.run.cropWidth):!d.left.pressed&&y==="left"&&t.currentSprite!==t.sprites.stand.left?(t.frames=1,t.currentSprite=t.sprites.stand.left,t.currentCropWidth=t.sprites.stand.cropWidth):!d.right.pressed&&y==="right"&&t.currentSprite!==t.sprites.stand.right&&(t.frames=1,t.currentSprite=t.sprites.stand.right,t.currentCropWidth=t.sprites.stand.cropWidth),x>h.width*5+300&&console.log("you win"),t.position.y>w.height&&GameState.isRunning&&(GameState.reset(),W())}q(d,t,s=>{y=s});function K(){W(),D()}K();
