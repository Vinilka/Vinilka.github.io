(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function D(e,t,r){window.addEventListener("keydown",({key:s})=>{switch(s){case"a":case"ArrowLeft":e.left.pressed=!0,r("left");break;case"d":case"ArrowRight":e.right.pressed=!0,r("right");break;case"w":case"ArrowUp":t.jumpCount<2&&(t.jumpCount++,e.up.pressed=!0,t.velocity.y-=18);break}}),window.addEventListener("keyup",({key:s})=>{switch(s){case"a":case"ArrowLeft":e.left.pressed=!1;break;case"d":case"ArrowRight":e.right.pressed=!1;break;case"w":case"ArrowUp":e.up.pressed=!1;break}})}function o(e){const t=new Image;return t.src=e,t}const S="/assets/playerStandRight-DjvDmSGx.png",P="/assets/playerStandLeft-DEAAEG9d.png",E="/assets/playerMoveRight-D3Rde_7M.png",L="/assets/playerMoveLeft-BzurysD1.png",R="/assets/playerJumpRight-fcMDIpmw.png",C="/assets/playerJumpLeft-BRExVOJF.png";class O{constructor({canvas:t,context:r,gravity:s}){this.canvas=t,this.context=r,this.speed=10,this.gravity=s,this.position={x:100,y:100},this.velocity={x:0,y:1},this.width=134,this.height=150,this.jumpCount=0,this.image=o(S),this.frames=0,this.sprites={stand:{right:o(S),left:o(P),cropWidth:387.375},run:{right:o(E),left:o(L),cropWidth:395},jump:{right:o(R),left:o(C),cropWidth:395}},this.currentSprite=this.sprites.stand.right,this.currentCropWidth=this.sprites.stand.cropWidth}draw(){this.context.drawImage(this.currentSprite,this.currentCropWidth*this.frames,-5,this.currentCropWidth,454,this.position.x,this.position.y,this.width,this.height)}updatePlayerFrame(){this.frames++,this.frames>=16&&(this.currentSprite===this.sprites.stand.right||this.currentSprite===this.sprites.stand.left)?this.frames=0:this.frames>=20&&(this.currentSprite===this.sprites.run.right||this.currentSprite===this.sprites.run.left)?this.frames=0:this.frames>=30&&(this.currentSprite===this.sprites.jump.right||this.currentSprite===this.sprites.jump.left)&&(this.frames=0)}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=this.canvas.height&&(this.velocity.y+=this.gravity)}}class d{constructor({x:t,y:r,image:s,context:i}){this.context=i,this.position={x:t,y:r},this.image=s,this.width=s.width,this.height=s.height}draw(){this.context.drawImage(this.image,this.position.x,this.position.y)}}class v{constructor({x:t,y:r,image:s,context:i}){this.context=i,this.position={x:t,y:r},this.image=s,this.width=s.width,this.height=s.height}draw(){this.context.drawImage(this.image,this.position.x,this.position.y)}}class T{constructor(t,r,s,i){this.context=i,this.image=o(t),this.position={x:r,y:s},this.width=280,this.height=180,this.padding=10,this.horizontalPadding=26,this.messageText="",this.messageIndex=0,this.messageVisible=!1,this.typingSpeed=50,this.scale=0,this.scaleIncrement=.03,this.textStartDelay=1e3}showMessage(t){this.messageText=t,this.messageIndex=0,this.messageVisible=!0,setTimeout(()=>this.typeMessage(),this.textStartDelay)}typeMessage(){this.messageIndex<this.messageText.length&&(this.messageIndex++,setTimeout(()=>this.typeMessage(),this.typingSpeed))}draw(){this.messageVisible&&(this.scale<1&&(this.scale+=this.scaleIncrement),this.context.save(),this.context.translate(this.position.x+this.width/2,this.position.y+this.height/2),this.context.scale(this.scale,this.scale),this.context.translate(-(this.position.x+this.width/2),-(this.position.y+this.height/2)),this.context.drawImage(this.image,this.position.x,this.position.y,this.width,this.height),this.context.restore(),this.context.fillStyle="#1d6c7a",this.context.font="18px PatrickHand",this.wrapText(this.messageText.slice(0,this.messageIndex),this.position.x+this.horizontalPadding,this.position.y+this.padding,this.width-this.horizontalPadding*2,20))}wrapText(t,r,s,i,a){const l=t.split(" ");let c="",n=[],f="",w=null,x=0;for(let p=0;p<l.length;p++)f=c+l[p]+" ",w=this.context.measureText(f),x=w.width,x>i&&p>0?(n.push(c),c=l[p]+" "):c=f;n.push(c);const j=n.length*a;let b=s+(this.height-j)/2+a;for(let p=0;p<n.length;p++)this.context.fillText(n[p],r,b),b+=a}isVisible(){return this.messageVisible}}class A{constructor(t){this.context=t,this.dialogues=[]}addDialogue(t,r,s,i){const a=new T(t,r,s,this.context);this.dialogues.push({bubble:a,text:i,shown:!1})}showDialogue(t){t<this.dialogues.length&&!this.dialogues[t].shown&&(this.dialogues[t].bubble.showMessage(this.dialogues[t].text),this.dialogues[t].shown=!0)}resetDialogues(){this.dialogues.forEach(t=>{t.shown=!1,t.bubble.messageVisible=!1,t.bubble.messageIndex=0,t.bubble.scale=0})}updatePositions(t){this.dialogues.forEach(r=>{r.bubble.position.x+=t.x,r.bubble.position.y+=t.y})}draw(){this.dialogues.forEach(t=>{t.shown&&t.bubble.draw()})}}const k="/assets/platform-ZmYJJPO7.png",B="/assets/platformSmallTall-sZHpuomb.png",J="/assets/background-CUvmzTqM.png",V="/assets/hills-DPd9AaJB.png",I="/assets/dialogueBoxRight-B75tebyr.png";function G(e,t,r){const s=o(k),i=o(B),a=new O({canvas:t,context:e,gravity:r}),l=[new d({x:s.width*4+250,y:270,image:i,context:e}),new d({x:0,y:470,image:s,context:e}),new d({x:s.width,y:470,image:s,context:e}),new d({x:s.width*2,y:470,image:s,context:e}),new d({x:s.width*3,y:470,image:s,context:e}),new d({x:s.width*4,y:470,image:s,context:e}),new d({x:s.width*5+200,y:470,image:s,context:e})],c=[new v({x:0,y:0,image:o(J),context:e}),new v({x:0,y:0,image:o(V),context:e})],n=new A(e);return n.addDialogue(I,750,60,"Hello there! I'm Anastasia. Welcome to my game!"),n.addDialogue(I,1050,60,"I am passionate about programming and good looking designs"),{player:a,platforms:l,backgroundObjects:c,dialogueManager:n,platformImage:s}}const u=document.querySelector("canvas"),m=u.getContext("2d");u.height=window.innerHeight;u.width=window.innerWidth;const z=1.1;let g;const h={right:{pressed:!1},left:{pressed:!1},up:{pressed:!1}};let y=0;function M(){const e=G(m,u,z);player=e.player,platforms=e.platforms,genericObject=e.backgroundObjects,dialogueManager=e.dialogueManager,platformImage=e.platformImage,y=0,D(h,player,t=>{g=t})}function W(){requestAnimationFrame(W),m.fillStyle="white",m.fillRect(0,0,u.width,u.height),backgroundObjects.forEach(e=>{e.draw()}),dialogueManager.draw(),platforms.forEach(e=>{e.draw()}),player.updatePlayerFrame(),player.update(),h.right.pressed&&player.position.x<400?player.velocity.x=player.speed:h.left.pressed&&player.position.x>100||h.left.pressed&&y===0&&player.position.x>0?player.velocity.x=-player.speed:(player.velocity.x=0,h.right.pressed?(y+=player.speed,platforms.forEach(e=>{e.position.x-=player.speed}),backgroundObjects.forEach(e=>{e.position.x-=player.speed*.66}),dialogueManager.updatePositions({x:-player.speed*.66,y:0})):h.left.pressed&&y>0&&(y-=player.speed,platforms.forEach(e=>{e.position.x+=player.speed}),backgroundObjects.forEach(e=>{e.position.x+=player.speed*.66}),dialogueManager.updatePositions({x:player.speed*.66,y:0}))),platforms.forEach(e=>{player.position.y+player.height<=e.position.y&&player.position.y+player.height+player.velocity.y>=e.position.y&&player.position.x+player.width>=e.position.x&&player.position.x<=e.position.x+e.width&&(player.velocity.y=0,player.jumpCount=0)}),player.position.x>200&&!dialogueManager.dialogues[0].shown&&dialogueManager.showDialogue(0),player.position.x>600&&!dialogueManager.dialogues[1].shown&&dialogueManager.showDialogue(1),h.up.pressed?(player.frames=1,g==="right"?(player.currentSprite=player.sprites.jump.right,player.currentCropWidth=player.sprites.jump.cropWidth):g==="left"&&(player.currentSprite=player.sprites.jump.left,player.currentCropWidth=player.sprites.jump.cropWidth)):h.right.pressed&&g==="right"&&player.currentSprite!==player.sprites.run.right?(player.frames=1,player.currentSprite=player.sprites.run.right,player.currentCropWidth=player.sprites.run.cropWidth):h.left.pressed&&g==="left"&&player.currentSprite!==player.sprites.run.left?(player.frames=1,player.currentSprite=player.sprites.run.left,player.currentCropWidth=player.sprites.run.cropWidth):!h.left.pressed&&g==="left"&&player.currentSprite!==player.sprites.stand.left?(player.frames=1,player.currentSprite=player.sprites.stand.left,player.currentCropWidth=player.sprites.stand.cropWidth):!h.right.pressed&&g==="right"&&player.currentSprite!==player.sprites.stand.right&&(player.frames=1,player.currentSprite=player.sprites.stand.right,player.currentCropWidth=player.sprites.stand.cropWidth),y>platformImage.width*5+300&&console.log("you win"),player.position.y>u.height&&GameState.isRunning&&(GameState.reset(),M())}function F(){M(),W()}F();
